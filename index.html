<!DOCTYPE html>
<html>
  <head>
    <title>Mathstermind</title>
    <link rel="stylesheet" type="text/css" href="Mathstermind.css">
  </head>
  <style>
     @font-face {
      font-family: 'ChunkFiveRegular';
  src: url('fonts/chunkfive/Chunkfive.otf') format('opentype'),
       url('fonts/chunkfive/Chunkfive.ttf') format('truetype'),
       url('fonts/chunkfive/Chunkfive.woff') format('woff');
        font-weight: normal;
        font-style: normal;
}
      html,
      body {
        margin-top: 0;
        padding: 0;
        width: 100%;
        height: 101%;
        font-family: Arial, Helvetica, sans-serif;
        background: linear-gradient(to bottom right, #edbfd0 0%, #edbab8 10%, #9f9bcf 40%, #72c0f8 60%, #afe0cd 80%, #dca3b8 100%);
}

      .mathster{
        color:rgb(26, 70, 200);
        display: inline-block;
        font-size: 40px;
      }

      .mind{
        color: #b62aba;
        display: inline-block; 
        font-size: 40px;
      }

      h1{
        display: inline-block;
      }

      .chat-container {
        display: flex;
        flex-direction: column;
        border: 1px solid black;
        height: 300px;
        width: 72%;
        padding-bottom: 20px;
        overflow-y: scroll;
        align-self: center;
        white-space: pre-wrap;
        align-items: center;
      }

      .chat-message {
        margin: 10px;
        padding: 10px;
        border-radius: 10px;
        background-color: #f1f1f1;
        max-width: 90%;
        animation-duration: 1.0s;
        animation-name: slideIn;
      }

      .user-message {
        align-self: flex-end;
        background-color: #0084ff;
        color: white;
        animation-duration: 1.0s;
        animation-name: slideIn;
      }

      .bot-message {
        align-self: flex-start;
        background-color: rgba(197, 201, 218, 0.767);
        animation-duration: 1.0s;
        animation-name: slideIn; 
      }

      .intro-message {
        text-align: center;
        margin: 10px;
        padding: 5px;
        padding-right: 23px;
        border-radius: 10px;
        background-color: rgba(197, 201, 218, 0.767);
        max-width: 73%;
        height: 55px;
        align-self: flex-start;
        color: #0d2a31;
        animation-duration: 1.0s;
        animation-name: slideIn; 
}


      @keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(50%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

      textarea {
        width: 72%;
        height: 80px;
        padding: 12px 20px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 4px;
        background-color: #f8f8f8;
        font-size: 16px;
        resize: none;
        ime-mode: active;
      }

      button {
        background-color: #0084ff;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      #user-guide-button{
        background-color: #1b77ce;
        width: 8%;
        height: 9%;
        align-self: center;
        padding:5px;
        position: absolute;
        top: 20px;
        right: 20px;
        background-color: rgb(46, 67, 99);
       color: rgb(255, 255, 255);
       padding: 10px 20px;
       border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
      }

      button.delete-btn {
        background-color: #de2417;
      }

      #feedback-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: rgb(46, 67, 99);
       color: rgb(255, 255, 255);
       padding: 10px 20px;
       border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 17px;
      }

      #note{
        margin-top: 0;
       color: #0d2a31;
       max-width: 74%;
       font-family: 'ChunkFiveRegular', sans-serif;
       font-weight: normal;
      }

       #link{
        color: #2947b5c9;
        text-decoration: none;
      }
    
   #user-guide-button:hover{ 
      background-color: #1b77ce; 
      color: #ffffff;
    }

    #feedback-button:hover {
     background-color: #346a99;
     color: #ffffff; 
}
    /* Small screens (mobile) */
  @media only screen and (max-width: 600px) {
      body {
        padding-left: 11px;
      }

      h1 {
        font-size: 18px;
      }

      .chat-container {
        width: 80%;
        max-width: 80%;
      }

      textarea {
        width: 85%;
        max-width: 85%;
      }

     #user-guide-button {
    position: fixed;
    top: 20px; 
    right: 20px; 
    font-size: 10px;
    width: 10%;
  }
  
  #feedback-button {
    position: fixed;
    bottom: 30px; 
    right: 10px; 
  }
  .sidebar {
        display: none;
      }

      .content {
        margin-left: 0;
      }
      .mathster{
        font-size: 30px;
      }
      .mind{
        font-size: 30px;
      }
    }
    

/* Medium screens (tablets) */
@media only screen and (min-width: 601px) and (max-width: 900px) {
  body {
    padding-left: 7px;
  }

  h1 {
    font-size: 36px;
  }

  .chat-container {
    width: 60%;
  }

  textarea {
    width: 60%;
  }
  .new-chat-button {
      font-size: 14px;
    }
       .sidebar {
        display: none;
      }

      .content {
        margin-left: 0;
      }
    }


/* Large screens (desktops) */
@media only screen and (min-width: 900px) {
  body {
    padding-left: 220px;
  }

  h1 {
    font-size: 48px;
  }

  .chat-container {
    width: 72%;
  }

  textarea {
    width: 72%;
  }
  .new-chat-button {
      font-size: 17px;
    }
}

.sidebar {
    background-color: #f1f1f1;
    width: 20%;
    min-width: 200px;
    max-width: 400px;
    height: 100%;
    overflow-y: scroll;
    position: fixed;
    left: 0;
    top: 0;
    padding: 10px;
    box-sizing: border-box;
    transition: width 0.3s ease-in-out;
    cursor: col-resize; 
  }

  .content {
    margin-left: 20%;
    transition: margin-left 0.3s ease-in-out;
  }

  .sidebar.sidebar-expanded {
    width: 30%;
    min-width: 200px;
    max-width: 500px;
  }

  .content.content-expanded {
    margin-left: 30%;
  }

  .new-chat-button {
    background-color: rgb(45, 100, 128);
    color: #ffffff;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    margin-bottom: 10px;
    width: 100%;
  }

  .sidebar {
    background: linear-gradient(to right, #E6F2FF, #F2F2F2); /* Replace with your desired subtle gradient colors */  
    width: 20%;
    min-width: 200px;
    max-width: 400px;
    height: 100%;
    overflow-y: scroll;
    position: fixed;
    left: 0;
    top: 0;
    padding: 10px;
    box-sizing: border-box;
    transition: width 0.3s ease-in-out;
    cursor: col-resize;
  }

  .sidebar.sidebar-expanded {
    width: 30%;
    min-width: 200px;
    max-width: 500px;
  }

  .sidebar h2 {
    color: #333;
    font-size: 1.2rem;
    margin-bottom: 10px;
  }

  #quick-tips-container {
    overflow-y: auto;
  }

  #quick-tips {
  display: grid;
  grid-template-columns: 1fr;
  grid-gap: 10px;
}

#quick-tips p {
  margin: 0;
  padding: 5px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background-color: #f8f8f8;
  line-height: 1.4;
}

  #quick-tips p:first-child {
    margin-top: 0;
  }

  #quick-tips p:last-child {
    margin-bottom: 0;
  }

  </style>
  <body>

    <div class="sidebar" id="sidebar">
      <h2>Quick Tips and Formulas</h2>
      <div id="quick-tips-container">
        <div id="quick-tips">
          <p>Tip 1: Use parentheses to group expressions.</p>
          <p>Tip 2: Use "^" for exponentiation.</p>
          <p>Tip 3: Use "sqrt()" for square roots.</p>
          <p>Tip 4: Use "sin()", "cos()", and "tan()" for trigonometric functions.</p>
          <p>Tip 5: To calculate the area of a triangle, use the formula: A = 0.5 * base * height.</p>
          <p>Tip 6: The Pythagorean theorem states that in a right triangle, the square of the length of the hypotenuse is equal to the sum of the squares of the other two sides: a² + b² = c².</p>
          <p>Tip 7: The circumference of a circle can be calculated using the formula: C = 2 * π * r, where π (pi) is approximately 3.14159 and r is the radius.</p>
          <p>Tip 8: To convert degrees to radians, use the formula: radians = (degrees * π) / 180.</p>
          <p>Tip 9: The quadratic formula can be used to solve quadratic equations of the form ax² + bx + c = 0. It is: x = (-b ± sqrt(b² - 4ac)) / (2a).</p>
          <p>Tip 10: The sum of an arithmetic series can be calculated using the formula: S = (n / 2) * (2a + (n - 1)d), where n is the number of terms, a is the first term, and d is the common difference.</p>
        </div>
      </div>
    </div>
    
   

    <div class="content" id="content">
    <h1><span class="mathster">Mathster</span><span class="mind">mind</span></h1><img src="beta.png"  style="width: 125px; height: 28px; padding-left: 15px;"><img>

    <button id="user-guide-button" onclick="  window.location.href='User_guide.html'">User Guide</button>
    <p id="note">Note: This is only the beta version. More functionality will be added soon. If you are having any issues, feel free to click the feedback button and let me know what to improve.</p>
      <p id="note">If you need any help, please refer to the <a id="link" href="User_guide.html">user guide</a> for further assistance.</p>
    <div class="chat-container">
     <div class="intro-message"> 
      Hello! How can I assist you today?
     </div>
    </div>
    AnswerCoins left: <span id="answer-coin-count">20</span>
    <form>
      <br>
      <textarea id="user-input" oninput="fillFunction()" placeholder="Enter a mathematical expression here."></textarea>
      <br />
      <button type="submit">Send</button>
      <button type="button" class="delete-btn">Delete</button>
      <button onclick="sendFeedback(event)" id="feedback-button">Feedback</button>
      <script>
      function sendFeedback(event) {
          event.preventDefault(); // prevents message from being sent to chat container
          window.location.href='https://docs.google.com/forms/d/e/1FAIpQLSffaakUz5JCB1ulpu2LoZVgInZ5YG1bNcOAt6-Dxm6gLsWnQg/viewform?usp=sf_link';
          localStorage.setItem('answerCoins', answerCoinCount.toString());

  }
      </script>
    </form>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.js"></script>
    <script src="autofill.js"></script>
    <script>
const savedAnswerCoins = localStorage.getItem('answerCoins');

      window.scrollTo(0, document.body.scrollHeight);
      let answerCoinCount = 20;

    // JavaScript code to adjust sidebar width by mouse dragging
    const sidebar = document.getElementById('sidebar');
    const content = document.getElementById('content');
    let isResizing = false;
    let sidebarWidth = sidebar.offsetWidth;

    sidebar.addEventListener('mousedown', function (e) {
      isResizing = true;
      sidebarWidth = e.clientX;
    });
    document.addEventListener('mousemove', function (e) {
      if (!isResizing)
        return;
      const sidebarMinWidth = 200;
      const sidebarMaxWidth = 500;
      const contentMargin = 10;
      const minWidthDiff = sidebarMinWidth - contentMargin;
      const maxWidthDiff = sidebarMaxWidth - contentMargin;
      const newWidth = Math.max(minWidthDiff, Math.min(maxWidthDiff, e.clientX - contentMargin));
      sidebar.style.width = newWidth + 'px';
      content.style.marginLeft = newWidth + 'px';
    });
    document.addEventListener('mouseup', function () {
      isResizing = false;
    });

const form = document.querySelector("form");
const userInput = document.querySelector("#user-input");
const chatContainer = document.querySelector(".chat-container");
const deleteBtn = document.querySelector(".delete-btn");
let botMessageText = "Hello! How can I assist you today?";

// send message function
function sendMessage() {
  const userMessage = document.createElement("div");
  userMessage.textContent = userInput.value;
  userMessage.className = "chat-message user-message";
  chatContainer.appendChild(userMessage);

  // clear the user input field
  userInput.value = "";
  answerCoinCount -= 1;
  const answerCoinCountElement = document.getElementById('answer-coin-count');
  answerCoinCountElement.textContent = answerCoinCount;

  if (answerCoinCount === 0) {
  userInput.disabled = true;
  form.querySelector('button').disabled = true;
}



  // use math.js to evaluate the user's input
  let input = userMessage.textContent;
  let result;
  try {
    result = math.evaluate(input);
  } catch (error) {
    result =
      "Sorry, I could not understand your question. Can you please rephrase it?";
  }

  setTimeout(() => {
    const botMessage = document.createElement("div");
    botMessage.textContent = result;
    botMessage.className = "chat-message bot-message";
    chatContainer.appendChild(botMessage);

    // scroll to the latest message
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }, 900); // 900 miliseconds delay

}

function deleteChatHistory() {
  // remove all chat messages
  while (chatContainer.firstChild) {
    chatContainer.removeChild(chatContainer.firstChild);
  }

  // add a new bot message to prompt the user for input
  const newBotMessage = document.createElement("div");
  newBotMessage.textContent = botMessageText;
  newBotMessage.className = "chat-message bot-message";
  chatContainer.appendChild(newBotMessage);


}


// send message on form submit or enter key press
form.addEventListener("submit", (e) => {
  e.preventDefault();
  sendMessage(),toLowerCase;
});

userInput.addEventListener("keydown", (e) => {
  if (e.keyCode === 13 && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  } else if (e.keyCode === 13 && e.shiftKey) {
    e.preventDefault();
    let startPos = userInput.selectionStart;
    let endPos = userInput.selectionEnd;
    userInput.value =
      userInput.value.substring(0, startPos) +
      "\n" +
      userInput.value.substring(endPos, userInput.value.length);
    userInput.setSelectionRange(startPos + 1, startPos + 1);
  } else if (e.keyCode === 46 && chatContainer.childNodes.length > 1) {
    deleteChatHistory();
  }
});

// add event listener to delete button
deleteBtn.addEventListener("click", () => {
  deleteChatHistory();
});

document.getElementById('answer-coin-count').textContent = answerCoinCount;
    </script>
  </body>
</html>
